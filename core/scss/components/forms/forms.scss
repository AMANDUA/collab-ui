@include exports('md-form') {
  .#{$namespace} {
    form,
    .#{$prefix}-form {
      margin: 0 0 $form-spacing;

      // Using forms within rows, we need to set some defaults
      .row {
        @include form-row-base;
      }
    }

    // Allow adding grid column classes directly to inputs.
    [class*='column'] {
      & > input[type],
      & > select,
      & > textarea {
        &:not([class*='column']):not([type='submit']):not([type='file']) {
          width: 100%;
        }
      }
    }

    input[type='number'] {
      appearance: textfield;
    }
    input[type='submit'] {
      appearance: none;
    }

    // Respect enforced amount of rows for textarea
    textarea[rows] {
      height: auto;
    }

    textarea {
      max-width: 100%;
      padding-top: rem-calc(2px);
      padding-bottom: rem-calc(2px);
    }

    // Not allow resize out of parent
    textarea {
      max-width: 100%;
      padding-top: rem-calc(2px);
      padding-bottom: rem-calc(2px);
    }

    // Add height value for select elements to match text input height
    select {
      @include form-select;

      &[multiple] {
        height: auto;
      }
    }

    // Adjust margin for form elements below
    input[type='file'],
    select {
      margin: 0 0 $form-spacing 0;
    }

    // Normalize file input width
    input[type='file'] {
      width: 100%;
    }

    // We add basic fieldset styling
    fieldset {
      @include fieldset;
      @include vr-spacing(p, 0);
    }

    .md-form__section {
      @media #{$medium-up} {
        // required to set sticky element container height
        display: flex;
        align-items: stretch;
      }

      @include grid-row($behavior: nest-collapse);
      @include vr-spacing(pt, 2);
      @include vr-spacing(pb, 3);
      @include vr-spacing(ph, 2);
      border-bottom: $form-section-border-color 1px solid;

      &:last-child {
        border-color: transparent;
      }

      .md-input-container {
        &:last-child {
          margin-bottom: 0;
        }

        & > input[type],
        & > select,
        & > textarea {
          &:not([class*='column']):not([type='submit']):not([type='file']) {
            width: 100%;
          }
        }
      }

      .section__info {
        @media #{$small-only} {
          @include vr-spacing(mb, 2.25);
        }

        .section__title {
          @extend %h4;

          @include vr-spacing(mb, 0.5);
        }

        @media #{$medium-up} {
          @include grid-column(
            $columns: 4,
            $last-column: false,
            $center: false,
            $offset: 0,
            $push: 0,
            $pull: 0,
            $collapse: true,
            $float: left
          );
        }

        @media #{$large-up} {
          @include grid-column(
            $columns: 3,
            $last-column: false,
            $center: false,
            $offset: 0,
            $push: 0,
            $pull: 0,
            $collapse: true,
            $float: left
          );
        }

        @media #{$xxlarge-up} {
          @include grid-column(
            $columns: 2,
            $last-column: false,
            $center: false,
            $offset: 0,
            $push: 0,
            $pull: 0,
            $collapse: true,
            $float: left
          );
        }
      }

      > .section__info {
        align-self: stretch;

        .sticky {
          @extend %sticky;

          &.sticky--active {
            display: block;
          }
        }
      }

      .section__content {
        .sub-section {
          @include vr-spacing(mb, 2.25);

          &:last-child {
            margin-bottom: 0;
          }

          &__label,
          &__title {
            @extend %h5;
            @include vr-spacing(mb, 0.75);
          }

          &__description {
            @extend .p;
            @include vr-spacing(mb, 1);
          }
        }

        @media #{$medium-up} {
          @include vr-spacing(mt, 0.25);
          @include grid-column(
            $columns: 7,
            $last-column: true,
            $center: false,
            $offset: 1,
            $push: 0,
            $pull: 0,
            $collapse: true,
            $float: left
          );
        }

        @media #{$large-up} {
          @include grid-column(
            $columns: 6,
            $last-column: true,
            $center: false,
            $offset: 1,
            $push: 0,
            $pull: 0,
            $collapse: true,
            $float: left
          );
        }

        @media #{$xlarge-up} {
          @include grid-column(
            $columns: 5,
            $last-column: true,
            $center: false,
            $offset: 1,
            $push: 0,
            $pull: 0,
            $collapse: true,
            $float: left
          );
        }
      }

      .side-panel-container & {
        padding-right: 0;
        padding-left: 0;

        &:first-child {
          padding-top: 0;
        }

        .section__info {
          @media #{$medium-up} {
            @include vr-spacing(mt, 0.25);

            width: 100%;
            margin-left: 0 !important;
          }

          @media #{$large-up} {
            @include vr-spacing(mt, 0.25);

            width: 100%;
            margin-left: 0 !important;
          }

          @media #{$xxlarge-up} {
            @include vr-spacing(mt, 0.25);

            width: 100%;
            margin-left: 0 !important;
          }
        }

        .section__content {
          margin-top: 0;

          @media #{$medium-up} {
            width: 100%;
            margin-top: 0;
            margin-left: 0 !important;
          }

          @media #{$large-up} {
            width: 100%;
            margin-top: 0;
            margin-left: 0 !important;
          }

          @media #{$xlarge-up} {
            width: 100%;
            margin-top: 0;
            margin-left: 0 !important;
          }
        }
      }

      .side-panel-container & {
        display: block;

        @include vr-spacing(pb, 1.25);

        &:last-child {
          border-color: $form-section-border-color;
        }

        .section__info {
          margin-bottom: 0;

          .section__title {
            @extend %h5;

            @include vr-spacing(mb, 0.75);

            padding: 0 !important;
          }

          .section__description {
            @include vr-spacing(mb, 1);
          }
        }
      }
    }

    .md-form .side-panel-section {
      border-color: transparent;
    }
  }
}
